' ============================================
' ADMIN CLASS DIAGRAMS
' This file contains PlantUML class diagrams for all admin scenarios
' Each diagram is separated by comments and can be rendered independently
' ============================================

!theme plain
skinparam class {
  BackgroundColor #E8F5E9
  BorderColor #2E7D32
  FontColor #000000
  ArrowColor #2E7D32
}

' ============================================
' DASHBOARD SCENARIOS
' ============================================

' Scenario 1.1: View Dashboard Statistics
@startuml Scenario_1_1_Class
class Admin {
  -userModel: User
  -studentModel: Student
  -doctorModel: Doctor
  -courseModel: Course
  -auditLogModel: AuditLog
  +dashboard(): void
  +getStudentCount(): int
  +getDoctorCount(): int
  +getCourseCount(): int
  +getRecentActivity(): array
}

class User {
  +getAll(): array
  +getCount(): int
  +getCountByRole(): int
}

class Student {
  +getAll(): array
  +getCount(): int
  +getCountThisMonth(): int
}

class Doctor {
  +getAll(): array
  +getCount(): int
  +getCountThisMonth(): int
}

class Course {
  +getAll(): array
  +getCount(): int
  +getCountThisSemester(): int
}

class AuditLog {
  +getRecent(): array
  +create(): bool
}

Admin --> User : uses
Admin --> Student : uses
Admin --> Doctor : uses
Admin --> Course : uses
Admin --> AuditLog : uses
@enduml

' ============================================

' Scenario 1.2: View System Alerts
@startuml Scenario_1_2_Class
class Admin {
  +dashboard(): void
  +checkTableExists(): bool
  +getSystemAlerts(): array
}

class DatabaseConnection {
  +getConnection(): PDO
  +query(): PDOStatement
}

Admin --> DatabaseConnection : uses
@enduml

' ============================================

' Scenario 1.3: View Recent Activity
@startuml Scenario_1_3_Class
class Admin {
  -auditLogModel: AuditLog
  +dashboard(): void
  +getRecentActivity(): array
  +formatActivityTitle(): string
  +formatTimeAgo(): string
}

class AuditLog {
  -table: string
  +getRecent(): array
  +getAll(): array
}

Admin --> AuditLog : uses
@enduml

' ============================================
' PROFILE MANAGEMENT SCENARIOS
' ============================================

' Scenario 2.1: View Admin Profile
@startuml Scenario_2_1_Class
class Admin {
  -userModel: User
  -adminRoleModel: AdminRole
  +profile(): void
  +getProfileData(): array
}

class User {
  -id: int
  -first_name: string
  -last_name: string
  -email: string
  -phone: string
  +findById(): ?array
  +getAll(): array
}

class AdminRole {
  -table: string
  -user_id: int
  -admin_level: string
  +findByUserId(): ?array
  +getAll(): array
}

Admin --> User : uses
Admin --> AdminRole : uses
User <|-- AdminRole : extends
@enduml

' ============================================

' Scenario 2.2: Update Profile Information
@startuml Scenario_2_2_Class
class Admin {
  -userModel: User
  +profile(): void
  +updateProfile(): void
  +validateInput(): bool
}

class User {
  -id: int
  -first_name: string
  -last_name: string
  -email: string
  -phone: string
  +update(): bool
  +validateEmail(): bool
}

Admin --> User : uses
@enduml

' ============================================

' Scenario 2.3: Update Profile - Invalid Email
@startuml Scenario_2_3_Class
class Admin {
  +profile(): void
  +validateInput(): bool
  +validateEmailFormat(): bool
}

class User {
  -email: string
  +validateEmail(): bool
  +isEmailValid(): bool
}

Admin --> User : uses
@enduml

' ============================================

' Scenario 2.4: Change Password
@startuml Scenario_2_4_Class
class Admin {
  -userModel: User
  +profile(): void
  +changePassword(): void
  +validateCurrentPassword(): bool
  +validateNewPassword(): bool
}

class User {
  -id: int
  -password: string
  +verifyPassword(): bool
  +updatePassword(): bool
  +hashPassword(): string
}

Admin --> User : uses
@enduml

' ============================================

' Scenario 2.5: Change Password - Wrong Current Password
@startuml Scenario_2_5_Class
class Admin {
  -userModel: User
  +profile(): void
  +changePassword(): void
  +validateCurrentPassword(): bool
}

class User {
  -password: string
  +verifyPassword(): bool
  +findById(): ?array
}

Admin --> User : uses
@enduml

' ============================================

' Scenario 2.6: Change Password - Password Mismatch
@startuml Scenario_2_6_Class
class Admin {
  +profile(): void
  +changePassword(): void
  +validatePasswordMatch(): bool
}

class User {
  +updatePassword(): bool
}

Admin --> User : uses
@enduml

' ============================================

' Scenario 2.7: Change Password - Too Short
@startuml Scenario_2_7_Class
class Admin {
  +profile(): void
  +changePassword(): void
  +validatePasswordLength(): bool
}

class User {
  +updatePassword(): bool
  +validatePassword(): bool
}

Admin --> User : uses
@enduml

' ============================================
' STUDENT MANAGEMENT SCENARIOS
' ============================================

' Scenario 3.1: View All Students
@startuml Scenario_3_1_Class
class Admin {
  -studentModel: Student
  +manageStudent(): void
  +getAllStudents(): array
}

class Student {
  -id: int
  -user_id: int
  -student_id: string
  -course_id: int
  +getAll(): array
  +findById(): ?array
  +getAllWithUser(): array
}

class User {
  -id: int
  -first_name: string
  -last_name: string
  -email: string
}

Admin --> Student : uses
Student --> User : references
@enduml

' ============================================

' Scenario 3.2: Create New Student
@startuml Scenario_3_2_Class
class Admin {
  -userModel: User
  -studentModel: Student
  +manageStudent(): void
  +createStudent(): void
  +generatePassword(): string
  +validateInput(): bool
}

class User {
  -first_name: string
  -last_name: string
  -email: string
  -phone: string
  -password: string
  +create(): bool
  +checkEmailExists(): bool
  +hashPassword(): string
}

class Student {
  -user_id: int
  -student_id: string
  -course_id: int
  +create(): bool
}

Admin --> User : uses
Admin --> Student : uses
User <|-- Student : extends
@enduml

' ============================================

' Scenario 3.3: Create Student - Duplicate Email
@startuml Scenario_3_3_Class
class Admin {
  -userModel: User
  +manageStudent(): void
  +createStudent(): void
  +validateEmailUniqueness(): bool
}

class User {
  -email: string
  +checkEmailExists(): bool
  +findByEmail(): ?array
}

Admin --> User : uses
@enduml

' ============================================

' Scenario 3.4: Create Student - Missing Required Fields
@startuml Scenario_3_4_Class
class Admin {
  +manageStudent(): void
  +createStudent(): void
  +validateRequiredFields(): bool
}

class User {
  -first_name: string
  -last_name: string
  -email: string
}

Admin --> User : uses
@enduml

' ============================================

' Scenario 3.5: Edit Student Information
@startuml Scenario_3_5_Class
class Admin {
  -userModel: User
  -studentModel: Student
  +manageStudent(): void
  +updateStudent(): void
  +validateInput(): bool
}

class User {
  +update(): bool
  +findById(): ?array
}

class Student {
  +update(): bool
  +findById(): ?array
}

Admin --> User : uses
Admin --> Student : uses
@enduml

' ============================================

' Scenario 3.6: View Student Details
@startuml Scenario_3_6_Class
class Admin {
  -studentModel: Student
  +getStudentDetails(): void
}

class Student {
  -id: int
  -user_id: int
  -student_id: string
  -course_id: int
  +findById(): ?array
  +getWithUser(): ?array
  +getWithCourse(): ?array
}

class User {
  -id: int
  -first_name: string
  -last_name: string
  -email: string
}

class Course {
  -id: int
  -course_code: string
  -course_name: string
}

Admin --> Student : uses
Student --> User : references
Student --> Course : references
@enduml

' ============================================

' Scenario 3.7: Delete Student
@startuml Scenario_3_7_Class
class Admin {
  -userModel: User
  -studentModel: Student
  +manageStudent(): void
  +deleteStudent(): void
  +checkDependencies(): bool
}

class Student {
  +delete(): bool
  +findById(): ?array
}

class User {
  +delete(): bool
  +findById(): ?array
}

Admin --> Student : uses
Admin --> User : uses
@enduml

' ============================================

' Scenario 3.8: Search/Filter Students
@startuml Scenario_3_8_Class
class Admin {
  -studentModel: Student
  +manageStudent(): void
  +searchStudents(): array
  +filterStudents(): array
}

class Student {
  +getAll(): array
  +search(): array
  +filter(): array
}

Admin --> Student : uses
@enduml

' ============================================
' DOCTOR MANAGEMENT SCENARIOS
' ============================================

' Scenario 4.1: View All Doctors
@startuml Scenario_4_1_Class
class Admin {
  -doctorModel: Doctor
  +manageDoctor(): void
  +getAllDoctors(): array
}

class Doctor {
  -id: int
  -user_id: int
  -specialization: string
  -department: string
  +getAll(): array
  +getAllWithUser(): array
}

class User {
  -id: int
  -first_name: string
  -last_name: string
  -email: string
}

Admin --> Doctor : uses
Doctor --> User : references
@enduml

' ============================================

' Scenario 4.2: Create New Doctor
@startuml Scenario_4_2_Class
class Admin {
  -userModel: User
  -doctorModel: Doctor
  +manageDoctor(): void
  +createDoctor(): void
  +generatePassword(): string
}

class User {
  +create(): bool
  +checkEmailExists(): bool
}

class Doctor {
  -user_id: int
  -specialization: string
  -department: string
  +create(): bool
}

Admin --> User : uses
Admin --> Doctor : uses
User <|-- Doctor : extends
@enduml

' ============================================

' Scenario 4.3: Edit Doctor Information
@startuml Scenario_4_3_Class
class Admin {
  -userModel: User
  -doctorModel: Doctor
  +manageDoctor(): void
  +updateDoctor(): void
}

class User {
  +update(): bool
}

class Doctor {
  +update(): bool
}

Admin --> User : uses
Admin --> Doctor : uses
@enduml

' ============================================

' Scenario 4.4: Delete Doctor
@startuml Scenario_4_4_Class
class Admin {
  -userModel: User
  -doctorModel: Doctor
  +manageDoctor(): void
  +deleteDoctor(): void
  +checkCourseAssignments(): bool
}

class Doctor {
  +delete(): bool
  +hasCourseAssignments(): bool
}

class User {
  +delete(): bool
}

Admin --> Doctor : uses
Admin --> User : uses
@enduml

' ============================================

' Scenario 4.5: View Doctor Details
@startuml Scenario_4_5_Class
class Admin {
  -doctorModel: Doctor
  +getDoctorDetails(): void
}

class Doctor {
  -id: int
  -user_id: int
  -specialization: string
  +findById(): ?array
  +getWithUser(): ?array
  +getAssignedCourses(): array
}

class User {
  -id: int
  -first_name: string
  -last_name: string
}

class Course {
  -id: int
  -course_code: string
}

Admin --> Doctor : uses
Doctor --> User : references
Doctor --> Course : assigned to
@enduml

' ============================================
' COURSE MANAGEMENT SCENARIOS
' ============================================

' Scenario 5.1: View All Courses
@startuml Scenario_5_1_Class
class Admin {
  -courseModel: Course
  +manageCourse(): void
  +getAllCourses(): array
}

class Course {
  -id: int
  -course_code: string
  -course_name: string
  -description: string
  -credits: int
  +getAll(): array
  +findById(): ?array
}

Admin --> Course : uses
@enduml

' ============================================

' Scenario 5.2: Create New Course
@startuml Scenario_5_2_Class
class Admin {
  -courseModel: Course
  +manageCourse(): void
  +createCourse(): void
  +validateCourseCode(): bool
}

class Course {
  -course_code: string
  -course_name: string
  -description: string
  -credits: int
  +create(): bool
  +checkCodeExists(): bool
}

Admin --> Course : uses
@enduml

' ============================================

' Scenario 5.3: Create Course - Duplicate Course Code
@startuml Scenario_5_3_Class
class Admin {
  -courseModel: Course
  +manageCourse(): void
  +createCourse(): void
  +validateCourseCodeUniqueness(): bool
}

class Course {
  -course_code: string
  +checkCodeExists(): bool
  +findByCode(): ?array
}

Admin --> Course : uses
@enduml

' ============================================

' Scenario 5.4: Edit Course Information
@startuml Scenario_5_4_Class
class Admin {
  -courseModel: Course
  +manageCourse(): void
  +updateCourse(): void
}

class Course {
  +update(): bool
  +findById(): ?array
}

Admin --> Course : uses
@enduml

' ============================================

' Scenario 5.5: Delete Course
@startuml Scenario_5_5_Class
class Admin {
  -courseModel: Course
  +manageCourse(): void
  +deleteCourse(): void
  +checkDependencies(): bool
}

class Course {
  +delete(): bool
  +hasEnrollments(): bool
  +hasSections(): bool
}

Admin --> Course : uses
@enduml

' ============================================

' Scenario 5.6: Manage Course Sections
@startuml Scenario_5_6_Class
class Admin {
  -courseModel: Course
  +manageCourse(): void
  +manageSections(): void
  +checkTableExists(): bool
}

class Course {
  -id: int
  +getSections(): array
}

class Section {
  -id: int
  -course_id: int
  -section_name: string
  -capacity: int
  +getAll(): array
  +create(): bool
  +update(): bool
}

Admin --> Course : uses
Course --> Section : has
@enduml

' ============================================

' Scenario 5.7: Assign Doctor to Course
@startuml Scenario_5_7_Class
class Admin {
  -doctorModel: Doctor
  -courseModel: Course
  +manageCourse(): void
  +assignDoctor(): void
}

class Doctor {
  -id: int
  +findById(): ?array
  +isAvailable(): bool
}

class Course {
  -id: int
  +assignDoctor(): bool
  +getAssignedDoctors(): array
}

Admin --> Doctor : uses
Admin --> Course : uses
Doctor --> Course : assigned to
@enduml

' ============================================
' IT OFFICER MANAGEMENT SCENARIOS
' ============================================

' Scenario 6.1: View All IT Officers
@startuml Scenario_6_1_Class
class Admin {
  -itOfficerModel: ItOfficer
  +manageIt(): void
  +getAllItOfficers(): array
}

class ItOfficer {
  -id: int
  -user_id: int
  -department: string
  +getAll(): array
  +getAllWithUser(): array
}

class User {
  -id: int
  -first_name: string
  -last_name: string
}

Admin --> ItOfficer : uses
ItOfficer --> User : references
@enduml

' ============================================

' Scenario 6.2: Create New IT Officer
@startuml Scenario_6_2_Class
class Admin {
  -userModel: User
  -itOfficerModel: ItOfficer
  +manageIt(): void
  +createItOfficer(): void
}

class User {
  +create(): bool
}

class ItOfficer {
  -user_id: int
  -department: string
  +create(): bool
}

Admin --> User : uses
Admin --> ItOfficer : uses
User <|-- ItOfficer : extends
@enduml

' ============================================

' Scenario 6.3: Edit IT Officer Information
@startuml Scenario_6_3_Class
class Admin {
  -userModel: User
  -itOfficerModel: ItOfficer
  +manageIt(): void
  +updateItOfficer(): void
}

class User {
  +update(): bool
}

class ItOfficer {
  +update(): bool
}

Admin --> User : uses
Admin --> ItOfficer : uses
@enduml

' ============================================

' Scenario 6.4: Delete IT Officer
@startuml Scenario_6_4_Class
class Admin {
  -userModel: User
  -itOfficerModel: ItOfficer
  +manageIt(): void
  +deleteItOfficer(): void
}

class ItOfficer {
  +delete(): bool
}

class User {
  +delete(): bool
}

Admin --> ItOfficer : uses
Admin --> User : uses
@enduml

' ============================================

' Scenario 6.5: Fix IT Officer Auto-Increment
@startuml Scenario_6_5_Class
class Admin {
  -itOfficerModel: ItOfficer
  +fixItAutoIncrement(): void
  +calculateAutoIncrement(): int
}

class ItOfficer {
  -id: int
  +fixAutoIncrement(): bool
  +getMaxId(): int
}

class DatabaseConnection {
  +execute(): bool
  +query(): PDOStatement
}

Admin --> ItOfficer : uses
ItOfficer --> DatabaseConnection : uses
@enduml

' ============================================
' ADMIN USER MANAGEMENT SCENARIOS
' ============================================

' Scenario 7.1: View All Admins
@startuml Scenario_7_1_Class
class Admin {
  -adminRoleModel: AdminRole
  +manageAdmin(): void
  +getAllAdmins(): array
}

class AdminRole {
  -admin_id: int
  -user_id: int
  -admin_level: string
  +getAll(): array
  +getAllWithUser(): array
}

class User {
  -id: int
  -first_name: string
  -last_name: string
}

Admin --> AdminRole : uses
AdminRole --> User : references
@enduml

' ============================================

' Scenario 7.2: Create New Admin
@startuml Scenario_7_2_Class
class Admin {
  -userModel: User
  -adminRoleModel: AdminRole
  +manageAdmin(): void
  +createAdmin(): void
}

class User {
  +create(): bool
}

class AdminRole {
  -user_id: int
  -admin_level: string
  +create(): bool
}

Admin --> User : uses
Admin --> AdminRole : uses
User <|-- AdminRole : extends
@enduml

' ============================================

' Scenario 7.3: Edit Admin Information
@startuml Scenario_7_3_Class
class Admin {
  -userModel: User
  -adminRoleModel: AdminRole
  +manageAdmin(): void
  +updateAdmin(): void
}

class User {
  +update(): bool
}

class AdminRole {
  +update(): bool
}

Admin --> User : uses
Admin --> AdminRole : uses
@enduml

' ============================================

' Scenario 7.4: Delete Admin
@startuml Scenario_7_4_Class
class Admin {
  -userModel: User
  -adminRoleModel: AdminRole
  +manageAdmin(): void
  +deleteAdmin(): void
  +countAdmins(): int
}

class AdminRole {
  +delete(): bool
  +getCount(): int
}

class User {
  +delete(): bool
}

Admin --> AdminRole : uses
Admin --> User : uses
@enduml

' ============================================

' Scenario 7.5: Change Admin Level
@startuml Scenario_7_5_Class
class Admin {
  -adminRoleModel: AdminRole
  +manageAdmin(): void
  +changeAdminLevel(): void
  +validateAdminLevel(): bool
}

class AdminRole {
  -admin_level: string
  +update(): bool
  +getValidLevels(): array
}

Admin --> AdminRole : uses
@enduml

' ============================================
' GENERAL USER MANAGEMENT SCENARIOS
' ============================================

' Scenario 8.1: View All Users
@startuml Scenario_8_1_Class
class Admin {
  -userModel: User
  +manageUser(): void
  +getAllUsers(): array
}

class User {
  -id: int
  -first_name: string
  -last_name: string
  -email: string
  -role: string
  +getAll(): array
  +getAllByRole(): array
}

Admin --> User : uses
@enduml

' ============================================

' Scenario 8.2: Create New User
@startuml Scenario_8_2_Class
class Admin {
  -userModel: User
  +manageUser(): void
  +createUser(): void
}

class User {
  -first_name: string
  -last_name: string
  -email: string
  -role: string
  +create(): bool
  +checkEmailExists(): bool
}

Admin --> User : uses
@enduml

' ============================================

' Scenario 8.3: Edit User Information
@startuml Scenario_8_3_Class
class Admin {
  -userModel: User
  +manageUser(): void
  +updateUser(): void
}

class User {
  +update(): bool
  +findById(): ?array
}

Admin --> User : uses
@enduml

' ============================================

' Scenario 8.4: Delete User
@startuml Scenario_8_4_Class
class Admin {
  -userModel: User
  +manageUser(): void
  +deleteUser(): void
  +checkDependencies(): bool
}

class User {
  +delete(): bool
  +hasDependencies(): bool
}

Admin --> User : uses
@enduml

' ============================================
' REPORT MANAGEMENT SCENARIOS
' ============================================

' Scenario 9.1: View All Reports
@startuml Scenario_9_1_Class
class Admin {
  -reportModel: Report
  +reports(): void
  +getAllReports(): array
  +checkTableExists(): bool
}

class Report {
  -id: int
  -title: string
  -description: string
  -report_type: string
  -file_data: blob
  +getAll(): array
  +findById(): ?array
}

Admin --> Report : uses
@enduml

' ============================================

' Scenario 9.2: Create New Report
@startuml Scenario_9_2_Class
class Admin {
  -reportModel: Report
  +reports(): void
  +createReport(): void
  +validateInput(): bool
}

class Report {
  -title: string
  -description: string
  -report_type: string
  -report_date: date
  +create(): bool
  +validate(): bool
}

Admin --> Report : uses
@enduml

' ============================================

' Scenario 9.3: Create Report with File Upload
@startuml Scenario_9_3_Class
class Admin {
  -reportModel: Report
  +reports(): void
  +createReport(): void
  +validateFile(): bool
  +processFileUpload(): void
}

class Report {
  -file_data: blob
  -file_name: string
  -file_type: string
  -file_size: int
  +create(): bool
  +storeFile(): bool
  +validateFileSize(): bool
  +validateFileType(): bool
}

Admin --> Report : uses
@enduml

' ============================================

' Scenario 9.4: Create Report - File Too Large
@startuml Scenario_9_4_Class
class Admin {
  -reportModel: Report
  +reports(): void
  +createReport(): void
  +validateFileSize(): bool
}

class Report {
  -file_size: int
  +validateFileSize(): bool
  +getMaxFileSize(): int
}

Admin --> Report : uses
@enduml

' ============================================

' Scenario 9.5: Create Report - Invalid File Type
@startuml Scenario_9_5_Class
class Admin {
  -reportModel: Report
  +reports(): void
  +createReport(): void
  +validateFileType(): bool
}

class Report {
  -file_type: string
  +validateFileType(): bool
  +getAllowedTypes(): array
}

Admin --> Report : uses
@enduml

' ============================================

' Scenario 9.6: Edit Report
@startuml Scenario_9_6_Class
class Admin {
  -reportModel: Report
  +reports(): void
  +updateReport(): void
}

class Report {
  +update(): bool
  +updateFile(): bool
  +findById(): ?array
}

Admin --> Report : uses
@enduml

' ============================================

' Scenario 9.7: Delete Report
@startuml Scenario_9_7_Class
class Admin {
  -reportModel: Report
  +reports(): void
  +deleteReport(): void
}

class Report {
  +delete(): bool
  +findById(): ?array
}

Admin --> Report : uses
@enduml

' ============================================

' Scenario 9.8: Download Report File
@startuml Scenario_9_8_Class
class Admin {
  -reportModel: Report
  +downloadReport(): void
}

class Report {
  -file_data: blob
  -file_name: string
  -file_type: string
  +getFileData(): ?array
  +getFileMetadata(): array
}

Admin --> Report : uses
@enduml

' ============================================

' Scenario 9.9: View Report Details
@startuml Scenario_9_9_Class
class Admin {
  -reportModel: Report
  +reports(): void
  +getReportDetails(): array
}

class Report {
  -id: int
  -title: string
  -description: string
  -file_name: string
  -file_size: int
  +findById(): ?array
  +getWithMetadata(): ?array
}

Admin --> Report : uses
@enduml

' ============================================

' Scenario 9.10: Run Report Migration
@startuml Scenario_9_10_Class
class Admin {
  +runTableMigration(): void
  +checkTableExists(): bool
  +readMigrationFile(): string
}

class DatabaseConnection {
  +execute(): bool
  +query(): PDOStatement
}

class MigrationFile {
  +read(): string
  +getPath(): string
}

Admin --> DatabaseConnection : uses
Admin --> MigrationFile : uses
@enduml

' ============================================
' NOTIFICATION SCENARIOS
' ============================================

' Scenario 10.1: View All Notifications
@startuml Scenario_10_1_Class
class Admin {
  -notificationModel: Notification
  +notifications(): void
  +getAllNotifications(): array
}

class Notification {
  -id: int
  -user_id: int
  -title: string
  -message: string
  -is_read: bool
  +getAll(): array
  +getByUserId(): array
}

Admin --> Notification : uses
@enduml

' ============================================

' Scenario 10.2: View Unread Notifications
@startuml Scenario_10_2_Class
class Admin {
  -notificationModel: Notification
  +notifications(): void
  +getUnreadNotifications(): array
  +getUnreadCount(): int
}

class Notification {
  -is_read: bool
  +getUnread(): array
  +countUnread(): int
}

Admin --> Notification : uses
@enduml

' ============================================

' Scenario 10.3: Mark Notification as Read
@startuml Scenario_10_3_Class
class Admin {
  -notificationModel: Notification
  +notifications(): void
  +markAsRead(): void
}

class Notification {
  -id: int
  -is_read: bool
  -read_at: timestamp
  +update(): bool
  +markAsRead(): bool
}

Admin --> Notification : uses
@enduml

' ============================================

' Scenario 10.4: Send Notification to All Users
@startuml Scenario_10_4_Class
class Admin {
  -userModel: User
  -notificationModel: Notification
  +sendNotification(): void
  +sendToAllUsers(): void
}

class User {
  +getAll(): array
  +getAllIds(): array
}

class Notification {
  -user_id: int
  -title: string
  -message: string
  +create(): bool
  +createForUsers(): bool
}

Admin --> User : uses
Admin --> Notification : uses
Notification --> User : references
@enduml

' ============================================

' Scenario 10.5: Send Notification to Specific Users
@startuml Scenario_10_5_Class
class Admin {
  -userModel: User
  -notificationModel: Notification
  +sendNotification(): void
  +sendToSpecificUsers(): void
  +validateRecipients(): bool
}

class User {
  +findByIds(): array
}

class Notification {
  +createForUsers(): bool
  +createForUserIds(): bool
}

Admin --> User : uses
Admin --> Notification : uses
@enduml

' ============================================

' Scenario 10.6: Send Notification to Students Only
@startuml Scenario_10_6_Class
class Admin {
  -userModel: User
  -notificationModel: Notification
  +sendNotification(): void
  +sendToStudents(): void
}

class User {
  +getAllByRole(): array
  +getStudentIds(): array
}

class Notification {
  +createForUsers(): bool
}

Admin --> User : uses
Admin --> Notification : uses
@enduml

' ============================================

' Scenario 10.7: Send Notification to Doctors Only
@startuml Scenario_10_7_Class
class Admin {
  -userModel: User
  -notificationModel: Notification
  +sendNotification(): void
  +sendToDoctors(): void
}

class User {
  +getAllByRole(): array
  +getDoctorIds(): array
}

class Notification {
  +createForUsers(): bool
}

Admin --> User : uses
Admin --> Notification : uses
@enduml

' ============================================

' Scenario 10.8: Send Notification - Missing Recipients
@startuml Scenario_10_8_Class
class Admin {
  -notificationModel: Notification
  +sendNotification(): void
  +validateRecipients(): bool
}

class Notification {
  +validateRecipients(): bool
}

Admin --> Notification : uses
@enduml

' ============================================

' Scenario 10.9: Send Notification - Missing Required Fields
@startuml Scenario_10_9_Class
class Admin {
  -notificationModel: Notification
  +sendNotification(): void
  +validateRequiredFields(): bool
}

class Notification {
  -title: string
  -message: string
  +validate(): bool
  +validateTitle(): bool
  +validateMessage(): bool
}

Admin --> Notification : uses
@enduml

' ============================================
' SYSTEM ADMINISTRATION SCENARIOS
' ============================================

' Scenario 11.1: Run Database Migration
@startuml Scenario_11_1_Class
class Admin {
  +runTableMigration(): void
  +checkTableExists(): bool
  +readMigrationFile(): string
  +executeMigration(): bool
}

class DatabaseConnection {
  +execute(): bool
  +query(): PDOStatement
  +beginTransaction(): bool
  +commit(): bool
}

class MigrationFile {
  +read(): string
  +exists(): bool
}

Admin --> DatabaseConnection : uses
Admin --> MigrationFile : uses
@enduml

' ============================================

' Scenario 11.2: Check Table Existence
@startuml Scenario_11_2_Class
class Admin {
  +checkTableExists(): bool
}

class DatabaseConnection {
  +query(): PDOStatement
  +tableExists(): bool
}

Admin --> DatabaseConnection : uses
@enduml

' ============================================

' Scenario 11.3: View System Logs
@startuml Scenario_11_3_Class
class Admin {
  -auditLogModel: AuditLog
  +viewLogs(): void
  +getSystemLogs(): array
}

class AuditLog {
  -id: int
  -user_id: int
  -action: string
  -details: string
  -created_at: timestamp
  +getAll(): array
  +getRecent(): array
}

Admin --> AuditLog : uses
@enduml

' ============================================

' Scenario 11.4: Handle Authentication Failure
@startuml Scenario_11_4_Class
class Admin {
  +__construct(): void
  +checkAuthentication(): bool
  +redirectToLogin(): void
}

class Session {
  +get(): mixed
  +has(): bool
  +clear(): void
}

class Controller {
  +redirectTo(): void
}

Admin --> Session : uses
Admin --|> Controller : extends
@enduml

' ============================================

' Scenario 11.5: Handle Session Expiry
@startuml Scenario_11_5_Class
class Admin {
  +checkSession(): bool
  +handleExpiredSession(): void
}

class Session {
  +isExpired(): bool
  +getTimestamp(): int
  +clear(): void
}

Admin --> Session : uses
@enduml

' ============================================

' Scenario 11.6: Access Denied for Non-Admin
@startuml Scenario_11_6_Class
class Admin {
  +__construct(): void
  +checkRole(): bool
  +denyAccess(): void
}

class Session {
  +get(): mixed
  +getRole(): string
}

class Controller {
  +redirectTo(): void
}

Admin --> Session : uses
Admin --|> Controller : extends
@enduml

' ============================================
' ERROR HANDLING SCENARIOS
' ============================================

' Scenario 12.1: Database Connection Error
@startuml Scenario_12_1_Class
class Admin {
  +handleError(): void
}

class DatabaseConnection {
  +getConnection(): PDO
  +isConnected(): bool
}

class ErrorHandler {
  +logError(): void
  +displayError(): void
}

Admin --> DatabaseConnection : uses
DatabaseConnection --> ErrorHandler : uses
@enduml

' ============================================

' Scenario 12.2: Missing Required Data
@startuml Scenario_12_2_Class
class Admin {
  +validateData(): bool
  +handleMissingData(): void
}

class Validator {
  +validateRequired(): bool
  +getMissingFields(): array
}

Admin --> Validator : uses
@enduml

' ============================================

' Scenario 12.3: Validation Error
@startuml Scenario_12_3_Class
class Admin {
  +validateInput(): bool
  +handleValidationError(): void
}

class Validator {
  +validate(): bool
  +validateFormat(): bool
  +validateLength(): bool
  +getErrors(): array
}

Admin --> Validator : uses
@enduml

