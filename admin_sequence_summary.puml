' ============================================
' ADMIN SYSTEM - SUMMARY SEQUENCE DIAGRAM
' This diagram provides a high-level overview of all essential admin operations
' ============================================

!theme plain
skinparam sequence {
  ArrowColor #4A148C
  LifeLineBorderColor #6A1B9A
  LifeLineBackgroundColor #F3E5F5
  ParticipantBorderColor #6A1B9A
  ParticipantBackgroundColor #E1BEE7
  ActorBorderColor #6A1B9A
  ActorBackgroundColor #CE93D8
}

@startuml Admin_System_Summary

actor "Admin User" as Admin

box "Core Systems" #F3E5F5
  participant "Authentication System" as Auth
  participant "Session Manager" as Session
  participant "Dashboard System" as Dashboard
end box

box "Management Systems" #E1BEE7
  participant "Student Management" as StudentMgmt
  participant "Profile Management" as Profile
  participant "Report Management" as ReportMgmt
  participant "Notification System" as NotificationSys
end box

box "Support Services" #E8F5E9
  participant "Validation Service" as Validator
  participant "Password Generator" as PasswordGen
  participant "File Upload Service" as FileService
  participant "System Administration" as SystemAdmin
end box

database "Database" as DB

== Authentication & Dashboard ==
Admin -> Auth : login request
Auth -> DB : verify credentials
DB --> Auth : credentials valid
Auth -> Session : create session
Session --> Auth : session created
Auth --> Admin : redirect to dashboard

Admin -> Dashboard : view dashboard
Dashboard -> Session : get admin ID
Dashboard -> DB : query statistics
DB --> Dashboard : statistics data
Dashboard --> Admin : display dashboard

== Student Management ==
Admin -> StudentMgmt : create student
StudentMgmt -> Validator : validate input
StudentMgmt -> DB : check email uniqueness
StudentMgmt -> PasswordGen : generate password
StudentMgmt -> DB : create user & student
DB --> StudentMgmt : creation successful
StudentMgmt --> Admin : success message

Admin -> StudentMgmt : edit student
StudentMgmt -> DB : load student data
StudentMgmt -> Validator : validate changes
StudentMgmt -> DB : update records
DB --> StudentMgmt : update successful
StudentMgmt --> Admin : success message

Admin -> StudentMgmt : delete student
StudentMgmt -> DB : check dependencies
StudentMgmt -> DB : delete records
DB --> StudentMgmt : deletion successful
StudentMgmt --> Admin : success message

== Profile Management ==
Admin -> Profile : update profile
Profile -> DB : load profile data
Profile -> Validator : validate input
Profile -> DB : update user record
Profile -> Session : update session
Profile --> Admin : success message

Admin -> Profile : change password
Profile -> DB : verify current password
Profile -> Validator : validate new password
Profile -> DB : update password
DB --> Profile : password updated
Profile --> Admin : success message

== Report Management ==
Admin -> ReportMgmt : create report with file
ReportMgmt -> Validator : validate fields
ReportMgmt -> FileService : validate file
FileService --> ReportMgmt : file valid
ReportMgmt -> DB : store report (BLOB)
DB --> ReportMgmt : report created
ReportMgmt --> Admin : success message

== Notification System ==
Admin -> NotificationSys : send notification
NotificationSys -> Validator : validate fields
NotificationSys -> DB : get user IDs
NotificationSys -> DB : create notifications
loop For each user
  DB --> NotificationSys : notification created
end
NotificationSys --> Admin : success message

== System Administration ==
Admin -> SystemAdmin : run migration
SystemAdmin -> DB : check table exists
alt Table missing
  SystemAdmin -> DB : execute migration
  DB --> SystemAdmin : migration successful
  SystemAdmin --> Admin : success message
else Table exists
  SystemAdmin --> Admin : table already exists
end

== Error Handling ==
alt Authentication Failure
  Admin -> Auth : access admin page
  Auth -> Session : check session
  Session --> Auth : not authenticated
  Auth --> Admin : redirect to login
end

@enduml

